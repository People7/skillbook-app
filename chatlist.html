<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chat Inbox - Skillbook</title>
  <style>
    /* (Same CSS, unchanged) */
  </style>
</head>
<body>
<nav style="background-color:#065f46; padding: 2rem;">
  <ul style="list-style: none; display: flex; flex-wrap: wrap; justify-content: center; gap: 1rem; margin: 0; padding: 0;">
    <li><a href="index.html" style="color: white; text-decoration: none;">Home </a></li>
    <li><a href="chatlist.html" style="color: white; text-decoration: none;">Chat Index</a></li>
    <li><a href="messages.html" style="color: white; text-decoration: none;">Messages</a></li>
    <li><a href="notifications.html" style="color: white; text-decoration: none;">Notifications</a></li>
  </ul>
</nav>

<h1>Chats</h1>

<div class="search-bar">
  <input type="text" id="searchInput" placeholder="Search chats..." onkeyup="filterChats()">
</div>

<div class="chat-list" id="chatList">
  <div class="chat-item" onclick="openChat('meera')">
    <div class="chat-avatar">M<span class="online-dot"></span></div>
    <div class="chat-info">
      <h3>Meera Patel <span class="unread-badge">2</span></h3>
      <p>Thanks! Let me know your availability...</p>
    </div>
    <div class="chat-time">2 min ago</div>
  </div>

  <div class="chat-item" onclick="openChat('ravi')">
    <div class="chat-avatar">R<span class="online-dot"></span></div>
    <div class="chat-info">
      <h3>Ravi Sharma</h3>
      <p>I’ve booked your service for April 10</p>
    </div>
    <div class="chat-time">10 min ago</div>
  </div>

  <div class="chat-item" onclick="openChat('ankit')">
    <div class="chat-avatar">A</div>
    <div class="chat-info">
      <h3>Ankit Joshi</h3>
      <p>Great work! I've left you a review.</p>
    </div>
    <div class="chat-time">1 hr ago</div>
  </div>
</div>

<script type="module">
  import { auth } from './firebase.js';

  // Example check:
  console.log('Firebase Auth ready:', auth);
</script>


  // Example: Get user chats if authenticated
  onAuthStateChanged(auth, async user => {
    if (user) {
      const querySnapshot = await getDocs(collection(db, "chats"));
      querySnapshot.forEach(doc => {
        console.log(doc.id, " => ", doc.data());
        // You can use doc.data() to dynamically render chat items
      });
    } else {
      console.log("User not signed in");
    }
  });

  window.filterChats = function () {
    const input = document.getElementById('searchInput').value.toLowerCase();
    const items = document.querySelectorAll('.chat-item');
    items.forEach(item => {
      const name = item.querySelector('h3').textContent.toLowerCase();
      item.style.display = name.includes(input) ? 'flex' : 'none';
    });
  }

  window.openChat = function (userId) {
    alert("Open chat with " + userId); // Replace with actual navigation logic
  }
</script>

</body>
</html>
